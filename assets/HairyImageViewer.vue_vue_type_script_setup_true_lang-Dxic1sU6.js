import{Z as R,P as E,p as y,aM as j,D as x,d as h,ae as I,aN as C,M as T,aO as U,b as g,c as S,f as v,e as O,R as N,x as V}from"./app-JCmIxXXV.js";import{i as k,E as A}from"./index-CX8Dv_sG.js";function P(e){return typeof e=="string"}function B(e){return typeof e=="number"}function de(e,t="px"){return P(e)||B(e)?P(e)&&/\D/g.test(e)?e:e+t:""}var L="unified-overlay";function D(e="",t=document.body){const n=document.createElement("div");return e&&(n.id=e),t!==!1&&t.appendChild(n),n}var d={position:null,spaces:{}};function M(e=L,t=!0){return d.spaces[e]||(d.spaces[e]=0),t?`${e}--${++d.spaces[e]}`:e}function $(e=L){return d.spaces[e]||0}function W(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=r=>(e(r),n),n.reject=t,n}function G(){typeof window>"u"&&typeof document>"u"||document.addEventListener("click",e=>{if(e.target instanceof Element){const{left:t,top:n,width:r,height:o}=e.target.getBoundingClientRect();t>0||n>0?d.position={x:t+r/2,y:n+o/2}:d.position=null}else d.position=null;setTimeout(()=>d.position=null,64)})}function H(e){function t(r,o){function i(a,c){const f=W(),_=M(c.id,c.autoIncrement),w=$(c.id),b=D(_,c.root);return e(r,a,Object.assign(c,{position:d.position,id:_,deferred:f,index:w,container:b})),f}let s;function u(a,c){return s||(s=i(a,c),s.finally(()=>s=void 0)),s}function l(a,c){const f={...o,...c};return f.only?u(a,f):i(a,f)}return l}function n(r,o,i){return t(r,i)(o)}return{define:t,render:n}}G();function z(){}function F(e){return new Promise(t=>setTimeout(t,e))}const K=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),X=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Z=new RegExp("(\\d)(\\p{Ll})","gu"),q=new RegExp("(\\p{L})(\\d)","gu"),J=/[^\p{L}\d]+/giu,p="$1\0$2";function Q(e,t={}){let n=e.replace(K,p).replace(X,p);t.separateNumbers&&(n=n.replace(Z,p).replace(q,p)),n=n.replace(J,"\0");let r=0,o=n.length;for(;n.charAt(r)==="\0";)r++;if(r===o)return[];for(;n.charAt(o-1)==="\0";)o--;return n.slice(r,o).split(/\0/g)}function Y(e){return t=>t.toLocaleLowerCase(e)}function ee(e){return t=>t.toLocaleUpperCase(e)}function te(e,t){const n=Y(t==null?void 0:t.locale),r=ee(t==null?void 0:t.locale);return Q(e,t).map((o,i)=>{const s=o[0];return(i>0&&s>="0"&&s<="9"?"_"+s:r(s))+n(o.slice(1))}).join("")}var ne={appContext:null},m=Symbol("OverlayScripts");function re(e={}){const{duration:t=0,immediate:n=!0,model:r="visible",automatic:o=!0}=e,i=R(m,oe(r,e)),s=Reflect.get(i,"in_dec"),{visible:u,deferred:l,vanish:a}=i;async function c(){return u.value=!1,await F(t),a==null||a(),Promise.resolve()}return!s&&o&&(l==null||l.then(c).catch(c)),!s&&n&&E(()=>u.value=!0),y(m,null),i}function oe(e,t={}){const{reject:n="reject",resolve:r="resolve"}=t.events||{},o=x();if(!o)throw new Error("Please use usePrograms in component setup");const i=j(o.props,e,o.emit,{passive:!0});return{reject:l=>{o==null||o.emit(n,l),i.value=!1},resolve:l=>{o==null||o.emit(r,l),i.value=!1},vanish:z,visible:i,in_dec:!0}}function ie(e){const{reject:t}=e.deferred||{},{vanish:n}=e,r=T(!1);function o(){n==null||n(),t==null||t()}return{resolve:e.deferred.resolve,reject:e.deferred.reject,deferred:e.deferred,visible:r,vanish:o}}function se(e,t){var n;const r=(t==null?void 0:t.app)||((n=ne.appContext)==null?void 0:n.app);r&&(e.config.globalProperties=r.config.globalProperties,Object.assign(e._context,r._context))}var ce=H((e,t,n)=>{const{container:r,id:o,deferred:i,appContext:s}=n;function u(){a.unmount(),r.remove()}const l=h({name:te(o),setup:()=>{const c=ie({vanish:u,deferred:i});y(m,c)},render:()=>I(e,t)}),a=C(l);return se(a,s),a.mount(r),u}),fe=ce.render;const ae={class:"HairyImageViewer fixed inset-0 z-2000"},pe=h({__name:"HairyImageViewer",props:k,setup(e){const t=e,{visible:n,resolve:r}=re({duration:1e3});return E(()=>{document.body.style.overflow="hidden"}),U(()=>{document.body.style.overflow=""}),(o,i)=>(g(),S("div",ae,[v(n)?(g(),O(v(A),N({key:0},t,{onClose:i[0]||(i[0]=s=>v(r)())}),null,16)):V("v-if",!0)]))}});export{pe as _,de as a,fe as r};
